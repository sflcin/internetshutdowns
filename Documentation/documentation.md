Documentation
=============
The project uses Node, express web development stack and open street map to build the map pointing the internet shutdowns occured in india since January 26, 2012. 

### Project Structure
The project uses MVC architecture, views are under views directory, model (in separate repository, shutdowns-backend), controller. Development stack includes Node, Express and MongoDB.

https://internetshutdowns.in/about

The project is primarily an `express` webapp that serves two kinds of pages.
1. The home page containing the map from `public/index.html`
2. All Other pages like `/about`, `/resources` which are coded as `pug.js` templates in `/views` directory

(Parts of webapp includes pages, home page, components of all those pages, tree structure of the file.)


### To setup the project locally:
The project uses stack including Node, Bower, Express and MongoDB. Follow the steps to setup the project locally:
* Install the nodejs and git
* Install node dependencies using `npm install` which will install bower dependencies itself.
* To run the server locally, `npm run start`

### Dependencies
All pacage dependencies can be installed via `npm install` and are listed in *package.json*.


### Sections of the Homepage
Following sections constitute the homepage:
* Nav Bar
* Map
*

### Map
#### The Map
The interactive map section powered by:
* [mapbox-gl-js](https://github.com/mapbox/mapbox-gl-js) to fetch and render maps
* [ractive.js](https://github.com/ractivejs/ractive) for DOM manipulation with templates

`/public/js/build.js` - contains code for rendering maps and handling interactivity.

*A contributor helped with a build script with webpack/watchify but only committed `build.js`
without the configuration or the source file which led to further changes made
directly to `build.js`. Ideally changes should be made to map.js and compiled into build.js*

`/public/js/app.js` - The older version of the shutdown tracker which is still
embedded in [the initial blog post about the tracker](https://sflc.in/internet-shutdown-tracker-india-20132016)

`public/js/mapbox-gl-boundaries.js` - Adds boundaries to the map for Indian states
n
`public/js/turf-intrntshtdns.min.js` - Generated with [turf](https://docs.mapbox.com/help/glossary/turf/)

`public/js/updates.js` - Ractive template for the deprecated `/updates` page
generated by `views/updates.jade`

#### Other parts of the app
* **Trends** - full screen gallery is powered by [baguetteBox.js](https://feimosi.github.io/baguetteBox.js/)
initialized in `public/js/build.js`
* **Sliding Quote Cards** - rendered using [jQuery Slick.js plugin](http://kenwheeler.github.io/slick/)
initialized in `public/js/build.dst-curriculmjs'


#### Classes and ID
Listing classes and id used for different elements in the webapp.


### Some useful guides
* To update longest shutdown, listing the elements and class to change for css and all
* For policy tracker page
* For Jade and Plug


Note: Read the comments in the code to understand the purpose of that code section.




[1]:
[2]:
[3]:
[4]:

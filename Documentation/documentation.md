Documentation
=============
Internet shutdowns tracker is an initiative by [SFLC.in](https://sflc.in) tracking Internet shutdowns in India since **2012**. The project and data shared on the website is open for everyone. This document is written to help anyone new to the project understand the working of the website.

 The project uses Express and Node as the web development stack. Many other libraries are used for different part of the website such as [Mapbox](https://github.com/mapbox/mapbox-gl-js) for rendering map. Read the [Libraries Used](#Libraries-Used) sections to know more about the other libraries used. 


## To setup the project locally:

The project uses stack including Node, Bower, Express. Follow the steps to setup the project locally:

* Install the [nodejs](https://github.com/nodejs/help/wiki/Installation) and [git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git).
* Clone the project repository locally on the system using `git clone https://github.com/sflcin/internetshutdowns.git`.
* Install node dependencies using `npm install` which will install bower dependencies itself after entering into the project repository using `cd internetshutdowns`.
* To run the server locally, `npm run start.`
* The project is hosted at `http://localhost:3000`.



## Project Structure

The project uses MVC architecture, views are under views directory, model (in separate repository, shutdowns-backend), controller. Development stack includes Node and Express.


The project is primarily an `express` web-app that serves two kinds of pages.
1. The home page containing the map from `public/index.html`
2. All Other pages like `/about`, `/resources` which are coded as `pug.js` templates in `/views` directory



### File structure

Check the [file-tree](./file-tree) to see the files used in the project and their purpose.

`/public/js/build.js` - contains code for rendering maps and handling interactivity.

*A contributor helped with a build script with webpack/watchify but only committed `build.js`
without the configuration or the source file which led to further changes made
directly to `build.js`. Ideally changes should be made to map.js and compiled into build.js*

`/public/js/app.js` - The older version of the shutdown tracker which is still
embedded in [the initial blog post about the tracker](https://sflc.in/internet-shutdown-tracker-india-20132016)

`public/js/mapbox-gl-boundaries.js` - Adds boundaries to the map for Indian states
n
`public/js/turf-intrntshtdns.min.js` - Generated with [turf](https://docs.mapbox.com/help/glossary/turf/)

`public/js/updates.js` - Ractive template for the deprecated `/updates` page
generated by `views/updates.jade`



### Data

The data is stored in a [MongoDB](https://www.mongodb.com/), which is fetched by our application to render the map with the pointers.



## Components of the Web App


### Sections of the Homepage
Following sections constitute the homepage:

* Header
  * Logo
  * Nav Bar
    * About
    * Blog
    * Why Should I Care?
    * What Can I Do
    * Donate
    * More
      * Resources
      * Policy Tracker
* Social Share kit
* Map Section
  * Map
  * Tracker component
* Internet Shutdown tracking handbook
* Longest Shutdowns
* Trends
* Updates with Twitter
* Sideshow
* Supporting Organizations
* SFLC initiative section
* Footer



### The Map
The interactive map section powered by:
* [mapbox-gl-js](https://github.com/mapbox/mapbox-gl-js) to fetch and render maps
* [ractive.js](https://github.com/ractivejs/ractive) for DOM manipulation with templates



### Other parts of the app

* **Trends** - full screen gallery is powered by [baguetteBox.js](https://feimosi.github.io/baguetteBox.js/)
initialized in `public/js/build.js`
* **Sliding Quote Cards** - rendered using [jQuery Slick.js plugin](http://kenwheeler.github.io/slick/)
initialized in `public/js/build.dst-curriculmjs'
* Other pages



### Classes and ID

Listing classes and id used for different elements in the webapp.



## Dependencies and libraries

All npm dependencies required for the project to work can be installed via `npm install` and are listed in **[package.json](../package.json)**.

* For map
  * Map Box
  * Ractivejs
* Bower
* SocialShareKit
* [baguetteBox.js](https://feimosi.github.io/baguetteBox.js/)
*  [jQuery Slick.js plugin](http://kenwheeler.github.io/slick/)



## Some useful guides

* To update longest shutdown, listing the elements and class to change for css and all
* For policy tracker page
* For Jade and Plug


Note: Read the comments in the code to understand the purpose of that code section.



## References for studying leaflet, javascript, express and node



[1]:
[2]:
[3]:
[4]: